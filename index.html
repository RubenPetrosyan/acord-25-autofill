<!DOCTYPE html>
<html>
  <body>

    <!-- Password Screen -->
    <form id="login" onsubmit="check(); return false;">
      <h2>Enter Password</h2>
      <input type="password" id="pwd" />
      <button type="submit">Enter</button>
      <p id="error" style="color:red;"></p>
    </form>

    <!-- Main App -->
    <div id="app" style="display:none;">
      <h1>ACORD 25 Autofill</h1>

      <p><b>Upload document (PDF, DOC, Image):</b></p>
      <input type="file" id="fileInput" onchange="toggleButton()" />

      <p><b>Additional text (optional):</b></p>
      <textarea id="extraText" rows="5" cols="50"></textarea>

      <br><br>
      <button id="fillBtn" disabled onclick="process()">Fill ACORD 25</button>
      <p id="status"></p>
    </div>

    <script>
  function check() {
    if (pwd.value === "10OC010") {
      login.style.display = "none";
      app.style.display = "block";
    } else {
      error.innerText = "Wrong password";
    }
  }

  function toggleButton() {
    fillBtn.disabled = !fileInput.files.length;
  }

  async function process() {
    status.innerText = "Uploading...";

    const formData = new FormData();
    formData.append("file", fileInput.files[0]);
    formData.append("text", extraText.value);

    const res = await fetch("/api/process", {
      method: "POST",
      body: formData
    });

    const data = await res.json();
    status.innerText = data.message;
  }
</script>



  </body>
</html>
